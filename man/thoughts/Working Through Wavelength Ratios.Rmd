---
title: "Working Through Wavelength Ratios"
output:
  github_document: default
always_allow_html: true
---

```{r, echo=F, message=F, include=F}
devtools::load_all(".")
source('../code/plot.R')
mami.codi(60)
```

```{r, echo=F}
P1 = hrep::sparse_fr_spectrum(c(60,72), num_harmonics=11, octave_ratio=2.0) %>% mami.codi(verbose=T)
```

```{r, echo=F}
P1 %>% dplyr::select(consonance_dissonance, major_minor)
```

#### Freq

```{r, echo=F}
P1$ratios_freq[[1]] %>% dplyr::arrange(ratio) %>% dplyr::rename(freq=pitch) %>% dplyr::mutate(
  wavelength = SPEED_OF_SOUND / freq
) %>% dplyr::select(-pseudo_ratio, -harmonic_number, -reference, -wavelength)
```

```{r, echo=F}
min(P1$chord_freqs[[1]])
P1$consonance_freq
```

#### Wavelength

```{r, echo=F}
P1$ratios_wavelength[[1]] %>% dplyr::arrange(dplyr::desc(ratio)) %>% dplyr::rename(wavelength=pitch) %>% dplyr::mutate(
  freq = SPEED_OF_SOUND / wavelength,
  ratio = 1/ratio
) %>% dplyr::select(den, num, ratio, freq, -wavelength, -pseudo_ratio, -harmonic_number, -reference)
```

```{r, echo=F}
max(P1$chord_freqs[[1]])
P1$consonance_wavelength
```
