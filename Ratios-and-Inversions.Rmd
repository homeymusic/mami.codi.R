---
title: "Frequency and Wavelength Relative Periodicity"
output:
  github_document: default
---

## Chord

```{r, echo=F, results='asis', message=F}
devtools::load_all('.')
setwd('.')
source('./man/code/plot.R')
source('./man/code/utils.R')
midi  = c(0, 4, 7) + 60
tolerance = 1e-01
chord = midi %>% mami.codi(
  frequency_tolerance  = tolerance,
  wavelength_tolerance = tolerance,
  verbose=T,
  num_harmonics = 10
)
midi
```

### Cycles Estimates

#### Spatial Estimate
```{r, echo=F, results='asis', message=F}
knitr::kable(tibble::tibble(
  tol_l     = chord$wavelength_tolerance,
  min_l_m   = min(chord$wavelengths[[1]]),
  lcd_l_Sz  = chord$wavelength_lcd,
  chord_l_m = min_l_m * lcd_l_Sz,
  chord_T_s = chord_l_m / SPEED_OF_SOUND
))
```

```{r, echo=F, results='asis', message=F}
ratios = chord$wavelength_ratios[[1]] %>%
  dplyr::select(index, num, den, tone)
lcd    = chord$wavelength_lcd
plot_wavelength_periodicity(ratios, lcd, 'wavelength')
```

### Wavelength Ratios
```{r, echo=F, results='asis', message=F}
knitr::kable(chord$wavelength_ratios[[1]] %>% dplyr::arrange(ratio) %>% dplyr::select(-pseudo_ratio))
```

#### Temporal Estimate
```{r, echo=F, results='asis', message=F}
knitr::kable(tibble::tibble(
  tol_T      = chord$frequency_tolerance,
  min_f_Hz   = min(chord$frequencies[[1]]),
  lcd_f_Sz   = chord$frequency_lcd,
  chord_f_Hz = min_f_Hz / lcd_f_Sz,
  chord_T    = 1 / chord_f_Hz
))
```

```{r, echo=F, results='asis', message=F}
ratios = chord$frequency_ratios[[1]] %>% 
  dplyr::select(index, num, den, tone)
lcd    = chord$frequency_lcd
plot_wavelength_periodicity(ratios, lcd, 'frequency')
```

### Frequency Ratios
```{r, echo=F, results='asis', message=F}
knitr::kable(chord$frequency_ratios[[1]] %>% dplyr::arrange(ratio) %>% dplyr::select(-pseudo_ratio))
```

#### References
[Periodic function from Wikipedia](https://en.wikipedia.org/wiki/Periodic_Tunction)
